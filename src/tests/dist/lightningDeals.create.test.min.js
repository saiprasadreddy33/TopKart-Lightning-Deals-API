"use strict";var request=require("supertest"),app=require("../app"),_require=require("../config/config"),connect=_require.connect,disconnect=_require.disconnect,lightningDealModel=require("../models/lightningDealModel"),mockLightningDeal={name:"Test Lightning Deal",description:"This is a test lightning deal",discountPercentage:20,startDate:"2023-05-01T00:00:00.000Z",endDate:"2023-05-02T00:00:00.000Z"};describe("Test Lightning Deal Creation",function(){beforeAll(function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:case"end":return e.stop()}})}),afterAll(function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(lightningDealModel.deleteMany());case 2:return e.next=4,regeneratorRuntime.awrap(disconnect());case 4:case"end":return e.stop()}})}),it("Should create a new lightning deal",function(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(request(app).post("/api/v1/lightningDeals").send(mockLightningDeal).set("Accept","application/json"));case 2:t=e.sent,expect(t.status).toEqual(201),expect(t.body.name).toEqual(mockLightningDeal.name),expect(t.body.description).toEqual(mockLightningDeal.description),expect(t.body.discountPercentage).toEqual(mockLightningDeal.discountPercentage),expect(new Date(t.body.startDate).toISOString()).toEqual(mockLightningDeal.startDate),expect(new Date(t.body.endDate).toISOString()).toEqual(mockLightningDeal.endDate);case 9:case"end":return e.stop()}})}),it("Should not create a new lightning deal with missing required fields",function(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(request(app).post("/api/v1/lightningDeals").send({name:"Test Lightning Deal",discountPercentage:20,startDate:"2023-05-01T00:00:00.000Z",endDate:"2023-05-02T00:00:00.000Z"}).set("Accept","application/json"));case 2:t=e.sent,expect(t.status).toEqual(400),expect(t.body.error).toBeTruthy();case 5:case"end":return e.stop()}})})});
//# sourceMappingURL=lightningDeals.create.test.min.js.map
